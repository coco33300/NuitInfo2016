<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Horloge</title>
</head>
    <body>
        <div id="Today"></div><br>
        <div id="locale"></div><!-- timezone from where the user is connected should be the one returned by Date object -->
        <div id="Timezones">

        </div>
        <div id="addTimezone">
            <select id="newTimeZone">
                <script>
                    for (var i = -12; i< 15; i++){
                        document.write("<option value=\""+i+ "\"> UTC "+( (i > 0) ? "+" +i: i )+"</option>");
                    }
                </script>
            </select>
            <button onclick="addTimeZone()">+</button>
        </div>
    </body>
    <script>
        var Months = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];
        date = new Date();
        document.getElementById("Today").innerHTML = date.getDate()+" " +Months[date.getMonth()]+" "+date.getFullYear();
        document.getElementById("locale").innerHTML = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
        var timezones = [];
        update = function () {
            var date = new Date();
            document.getElementById("Today").innerHTML = date.getDate()+" " +Months[date.getMonth()]+" "+date.getFullYear();
            document.getElementById("locale").innerHTML = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
            timezones.forEach(function (timezone, i ) {
                var d = new Date();
                var tz = document.getElementById("tz"+i);
                console.log(document.getElementById("tz"+i));
                tz.innerHTML = ((d.getUTCHours() + timezone.offset )%24 ) + ":" + d.getMinutes() + ":" + d.getSeconds()+ "\t" + timezone.utc;

            })
        };
        setInterval(update, 1000);

    </script>
    <script>
        var nbtz = 0;
        function addTimeZone(){
            var select = document.getElementById("newTimeZone");
            var option = select.options[select.selectedIndex];
            var t = {offset : parseInt(option.value), utc: ("UTC" + ( option.value > 0? " +" +option.value : option.value))};
            timezones.push(t);
            var d = new Date();
            var newTZ = document.createElement("div");
            newTZ.id = "tz" +nbtz;
            newTZ.innerHTML = ((d.getUTCHours() + t.offset )%24 ) + ":" + d.getMinutes() + ":" + d.getSeconds()+"\t" + t.utc;
            document.getElementById("Timezones").appendChild(newTZ);
            nbtz++;
        }
    </script>
</html>